@page
@model CNCMaintenanceAutomation.Pages.Maintenances.DetailsModel
@{
    ViewData["Title"] = "Details";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<div class="container pt-4 pb-2 row">
    <div class="col-6">
        <h2 class="text-info py-2">Maintenance Details</h2>
    </div>
    <div class="col-3 offset-3 text-right py-2">
        <a asp-page="../Maintenances/History"
           asp-route-cncMachineId="@Model.MaintenanceServiceGeneral.CncMachineId"
           class="btn btn-info form-control"
           style="height:3.8rem; text-align:center;">
            <i class="fas fa-arrow-left"></i>
            &nbsp;Back To Maintenance History
        </a>
    </div>
</div>

<div class="container">
    <div class="card">
        <div class="card-header ml-0 row container">
            @* Person *@
            <div class="col-5">
                <table class="table table-striped table-bordered">
                    @* thead-dark *@
                    <thead>
                        <tr>
                            <th scope="col"><i class="fas fa-user"></i></th>
                            <th scope="col">Customer</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">
                                @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral.CncMachine.ApplicationUser.NameLastName)
                            </th>
                            <td>
                                @Html.DisplayFor(model => model.MaintenanceServiceGeneral.CncMachine.ApplicationUser.NameLastName)
                            </td>
                        </tr>
                        <tr>
                            <th scope="row">
                                @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral.CncMachine.ApplicationUser.Email)
                            </th>
                            <td>
                                @Html.DisplayFor(model => model.MaintenanceServiceGeneral.CncMachine.ApplicationUser.Email)
                            </td>
                        </tr>
                        <tr>
                            <th scope="row">
                                @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral.CncMachine.ApplicationUser.PhoneNumber)
                            </th>
                            <td>
                                @Html.DisplayFor(model => model.MaintenanceServiceGeneral.CncMachine.ApplicationUser.PhoneNumber)
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            @* Cnc Machine *@
            <div class="col-5">

                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th scope="col"><i class="fas fa-cogs"></i></th>
                            <th scope="col">Cnc Machine</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">
                                @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral.CncMachine.SerialNumber)

                            </th>
                            <td>
                                @Html.DisplayFor(model => model.MaintenanceServiceGeneral.CncMachine.SerialNumber)
                            </td>
                        </tr>
                        <tr>
                            <th scope="row">
                                @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral.CncMachine.Brand)
                            </th>
                            <td>
                                @Html.DisplayFor(model => model.MaintenanceServiceGeneral.CncMachine.Brand)
                            </td>
                        </tr>
                        <tr>
                            <th scope="row">
                                @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral.CncMachine.Model)
                            </th>
                            <td>
                                @Html.DisplayFor(model => model.MaintenanceServiceGeneral.CncMachine.Model)
                            </td>
                        </tr>
                        <tr>
                            <th scope="row">
                                @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral.CncMachine.MachineType)
                            </th>
                            <td>
                                @Html.DisplayFor(model => model.MaintenanceServiceGeneral.CncMachine.MachineType)

                            </td>
                        </tr>
                        <tr>
                            <th scope="row">
                                @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral.CncMachine.OperationTime)
                            </th>
                            <td>
                                @Html.DisplayFor(model => model.MaintenanceServiceGeneral.CncMachine.OperationTime)
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card-body">
            <div class="row pt-3">
                <div class="col-7">
                    <table class="table table-striped border">
                        <tr class="table-secondary">
                            <th> 
                                @Html.DisplayNameFor(model => model.MaintenanceServiceDetails[0].MaintenanceName)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.MaintenanceServiceDetails[0].MaintenancePrice)
                            </th>
                        </tr>
                        @foreach (var item in Model.MaintenanceServiceDetails)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(a => item.MaintenanceName)
                                </td>
                                <td>
                                    @Html.DisplayFor(a => item.MaintenancePrice)
                                </td>
                            </tr>
                        }
                        <tr>
                            <td colspan="1">
                                <h6 class="text-success">
                                    Total Price:&nbsp;
                                </h6>
                            </td>
                            <td colspan="2">
                                <h6 class="text-success">
                                    @Model.MaintenanceServiceGeneral.TotalPrice&nbsp;&euro;
                                </h6>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="col-5 px-4 pb-2">
                    <div class="row">
                        <div class="col-9">
                            <label asp-for="MaintenanceServiceGeneral.MachineOperationTime" class="form-control" style="border:none;">
                                
                            </label>
                        </div>
                        
                        <div class="col-9">
                            <input readonly id="txtMachineOperationTime" class="form-control" asp-for="MaintenanceServiceGeneral.MachineOperationTime" />
                        </div>
                    </div>
                    <div class="row py-2">
                        <div class="col-12">
                            <textarea readonly
                                      placeholder="Details not found..."
                                      class="form-control"
                                      style="height:150px; width:400px;"
                                      asp-for="MaintenanceServiceGeneral.Details" ></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>