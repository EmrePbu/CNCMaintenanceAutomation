@page
@model CNCMaintenanceAutomation.Pages.Maintenances.HistoryModel
@{
    ViewData["Title"] = "History";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<div class="container pt-4 pb-2 row">
    <div class="col-6">
        <h2 class="text-info py-2">Maintenance History</h2>
    </div>
    <div class="col-3 offset-3 text-right py-2">
        <a asp-page="../Machines/Index" asp-route-ownerId="@Model.OwnerId" class="btn btn-info form-control"><i class="fas fa-arrow-left"></i>&nbsp;Back To Cnc Machine List</a>
    </div>
</div>
@if (Model.MaintenanceServiceGeneral.Count == 0)
{
    <h4 class="text-danger">Maintenance history null</h4>
}
else
{
    <div class="container">

        <div class="card">
            <div class="card-header ml-0 row container">
                @* Person *@
                <div class="col-5">
                    <table class="table table-striped table-bordered">
                        @* thead-dark *@
                        <thead>
                            <tr>
                                <th scope="col"><i class="fas fa-user"></i></th>
                                <th scope="col">Customer</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row">
                                    @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral[0].CncMachine.ApplicationUser.NameLastName)
                                </th>
                                <td>
                                    @Html.DisplayFor(model => model.MaintenanceServiceGeneral[0].CncMachine.ApplicationUser.NameLastName)
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral[0].CncMachine.ApplicationUser.Email)
                                </th>
                                <td>
                                    @Html.DisplayFor(model => model.MaintenanceServiceGeneral[0].CncMachine.ApplicationUser.Email)
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral[0].CncMachine.ApplicationUser.PhoneNumber)
                                </th>
                                <td>
                                    @Html.DisplayFor(model => model.MaintenanceServiceGeneral[0].CncMachine.ApplicationUser.PhoneNumber)
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                @* Cnc Machine *@
                <div class="col-5">

                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th scope="col"><i class="fas fa-cogs"></i></th>
                                <th scope="col">Cnc Machine</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row">
                                    @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral[0].CncMachine.SerialNumber)

                                </th>
                                <td>
                                    @Html.DisplayFor(model => model.MaintenanceServiceGeneral[0].CncMachine.SerialNumber)
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral[0].CncMachine.Brand)
                                </th>
                                <td>
                                    @Html.DisplayFor(model => model.MaintenanceServiceGeneral[0].CncMachine.Brand)
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral[0].CncMachine.Model)
                                </th>
                                <td>
                                    @Html.DisplayFor(model => model.MaintenanceServiceGeneral[0].CncMachine.Model)
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral[0].CncMachine.MachineType)
                                </th>
                                <td>
                                    @Html.DisplayFor(model => model.MaintenanceServiceGeneral[0].CncMachine.MachineType)

                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    @Html.DisplayNameFor(model => model.MaintenanceServiceGeneral[0].CncMachine.OperationTime)
                                </th>
                                <td>
                                    @Html.DisplayFor(model => model.MaintenanceServiceGeneral[0].CncMachine.OperationTime)
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="card-body">
            <table class="table table-striped border">
                <tr class="table-secondary">
                    <th>
                        @Html.DisplayNameFor(a => Model.MaintenanceServiceGeneral[0].MachineOperationTime)
                    </th>
                    <th>
                        @Html.DisplayNameFor(a => Model.MaintenanceServiceGeneral[0].TotalPrice)
                    </th>
                    <th>
                        @Html.DisplayNameFor(a => Model.MaintenanceServiceGeneral[0].Details)
                    </th>
                    <th>
                        @Html.DisplayNameFor(a => Model.MaintenanceServiceGeneral[0].CreationDate)
                    </th>
                    <th></th>
                </tr>

                @foreach (var item in Model.MaintenanceServiceGeneral)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(a => item.MachineOperationTime)
                        </td>
                        <td>
                            @Html.DisplayFor(a => item.TotalPrice)
                        </td>
                        <td>
                            @Html.DisplayFor(a => item.Details)
                        </td>
                        <td>
                            @Html.DisplayFor(a => item.CreationDate)
                        </td>
                        <td>
                            <a asp-page="Details" class="btn btn-info form-control" asp-route-maintenanceId="@item.Id">
                                <i class="fas fa-info-circle"></i>
                                &nbsp;Details
                            </a>
                        </td>
                    </tr>
                }

            </table>
        </div>


    </div>
}